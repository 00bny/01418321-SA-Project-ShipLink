<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ShipLink • Create Order</title>

  <script src="https://cdn.tailwindcss.com?plugins=forms,typography"></script>

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@400;500;600;700&display=swap" rel="stylesheet" />

  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />

  <script>
    tailwind.config = {
      darkMode: "class",
      theme: {
        extend: {
          colors: {
            primary: "#2563EB",
            "background-light": "#F8FAFC",
            "background-dark": "#0F172A",
            "sidebar-light": "#FFFFFF",
            "sidebar-dark": "#0B1220",
            "text-light": "#0F172A",
            "text-dark": "#E2E8F0",
            "input-light": "#F1F5F9",
            "input-dark": "#334155",
            "border-light": "#E2E8F0",
            "border-dark": "#334155",
            "card-light": "#FFFFFF",
            "card-dark": "#0F172A",
          },
          fontFamily: { display: ["Prompt", "sans-serif"] },
          borderRadius: { DEFAULT: "0.75rem" }
        },
      },
    };
  </script>
  <style>
    body{font-family:'Prompt',sans-serif;min-height:max(884px,100dvh)}
    .muted{opacity:.45;pointer-events:none;filter:grayscale(1)}
    .btn-gray{background-color:#cbd5e1;color:#ffffff;cursor:not-allowed;opacity:.8}
  </style>
</head>
<body class="bg-background-light text-text-light font-display">
<div class="flex min-h-screen">
  <!-- Sidebar -->
  <aside class="w-64 bg-sidebar-light border-r border-border-light">
    <div class="p-6">
      <h1 class="text-2xl font-extrabold">ShipLink</h1>
    </div>
    <nav class="mt-4">
      <a class="flex items-center px-6 py-3 text-slate-700 hover:bg-slate-100" href="./dashboard.html">
        <span class="material-icons">dashboard</span><span class="ml-3">Dashboard</span>
      </a>
      <a class="flex items-center px-6 py-3 bg-blue-50 text-primary font-semibold" href="./create-order.html">
        <span class="material-icons">create</span><span class="ml-3">Create Order</span>
      </a>
      <a class="flex items-center px-6 py-3 text-slate-700 hover:bg-slate-100" href="./all-order.html">
        <span class="material-icons">all_inbox</span><span class="ml-3">All Order</span>
      </a>
      <a class="flex items-center px-6 py-3 text-slate-700 hover:bg-slate-100" href="./pickup.html">
        <span class="material-icons">inventory</span><span class="ml-3">Pickup</span>
      </a>
    </nav>
  </aside>

  <!-- Content -->
  <div class="flex-1 flex flex-col">
    <header class="flex items-center justify-between p-4 bg-white border-b border-border-light">
      <h2 class="text-2xl font-bold">สร้างออร์เดอร์พัสดุ</h2>
      <div class="flex items-center space-x-3">
        <button class="flex items-center bg-green-100 text-green-700 px-4 py-2 rounded-lg">
          <span>$1,250.00</span><span class="material-icons ml-1">arrow_drop_down</span>
        </button>
        <img src="https://i.pravatar.cc/80" class="w-10 h-10 rounded-full" alt="avatar">
      </div>
    </header>

    <main class="flex-1 p-6 space-y-6">

      <!-- STEP 1 & 2: Sender/Receiver -->
      <section id="step1" class="bg-white rounded-xl shadow p-6">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
          <!-- STEP 1: Sender -->
          <div>
            <span class="inline-block bg-orange-200 text-orange-800 text-sm font-semibold px-3 py-1 rounded-md mb-4">Step 1 ข้อมูลผู้ส่ง</span>
            <label class="block text-sm font-medium mb-1">เบอร์โทรศัพท์</label>
            <div class="relative mb-4">
              <input id="senderPhone" class="w-full pl-4 pr-10 py-2 bg-input-light border border-border-light rounded-md"
                     placeholder="กรุณากรอกเบอร์โทรศัพท์" value="" inputmode="numeric" pattern="\d*">
              <button id="btnSearchSender" class="material-icons absolute right-2 top-1/2 -translate-y-1/2 text-slate-500">search</button>
            </div>

            <div id="senderPreview" class="border border-dashed border-border-light rounded-md p-3 text-slate-500">ยังไม่มีข้อมูล</div>

            <form id="senderForm" class="mt-3 hidden">
              <label class="block text-sm font-medium mb-1">ชื่อผู้ส่ง</label>
              <input id="senderName" maxlength="150" class="w-full pl-4 py-2 bg-input-light border border-border-light rounded-md" placeholder="ชื่อ - นามสกุล">
              <label class="block text-sm font-medium mt-3 mb-1">ที่อยู่โดยละเอียด</label>
              <textarea id="senderAddr" maxlength="250" rows="4" class="w-full pl-4 py-2 bg-input-light border border-border-light rounded-md" placeholder="บ้านเลขที่, หมู่, ซอย, ถนน, แขวง/ตำบล..."></textarea>
              <button id="btnSaveSender" type="button" class="mt-3 bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-md">บันทึก</button>
            </form>
          </div>

          <!-- STEP 2: Receiver -->
          <div>
            <span class="inline-block bg-orange-200 text-orange-800 text-sm font-semibold px-3 py-1 rounded-md mb-4">Step 2 ข้อมูลผู้รับ</span>
            <label class="block text-sm font-medium mb-1">เบอร์โทรศัพท์</label>
            <div class="relative mb-4">
              <input id="receiverPhone" class="w-full pl-4 pr-10 py-2 bg-input-light border border-border-light rounded-md"
                     placeholder="กรุณากรอกเบอร์โทรศัพท์" value="" inputmode="numeric" pattern="\d*">
              <button id="btnSearchReceiver" class="material-icons absolute right-2 top-1/2 -translate-y-1/2 text-slate-500">search</button>
            </div>

            <div id="receiverPreview" class="border border-dashed border-border-light rounded-md p-3 text-slate-500">ยังไม่มีข้อมูล</div>

            <form id="receiverForm" class="mt-3 hidden">
              <label class="block text-sm font-medium mb-1">ชื่อผู้รับ</label>
              <input id="receiverName" maxlength="150" class="w-full pl-4 py-2 bg-input-light border border-border-light rounded-md" placeholder="ชื่อ - นามสกุล">
              <label class="block text-sm font-medium mt-3 mb-1">ที่อยู่โดยละเอียด</label>
              <textarea id="receiverAddr" maxlength="250" rows="4" class="w-full pl-4 py-2 bg-input-light border border-border-light rounded-md" placeholder="บ้านเลขที่, หมู่, ซอย, ถนน, แขวง/ตำบล..."></textarea>
              <button id="btnSaveReceiver" type="button" class="mt-3 bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-md">บันทึก</button>
            </form>
          </div>
        </div>

        <div class="flex justify-end mt-6">
          <button id="nextToStep3" class="btn-gray font-semibold py-2 px-6 rounded-md" disabled>ถัดไป</button>
        </div>
      </section>

      <!-- STEP 3: Parcel -->
      <section id="step3" class="bg-white rounded-xl shadow p-6 muted">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
          <div>
            <span class="inline-block bg-yellow-200 text-yellow-800 text-sm font-semibold px-3 py-1 rounded-md mb-4">Step 3 รายละเอียดพัสดุ</span>
            <div class="grid grid-cols-2 gap-4">
              <div>
                <label class="block text-sm font-medium mb-1">กว้าง (ซม.)</label>
                <input id="w" class="w-full pl-4 py-2 bg-input-light border border-border-light rounded-md" value="0" inputmode="numeric">
              </div>
              <div>
                <label class="block text-sm font-medium mb-1">ยาว (ซม.)</label>
                <input id="l" class="w-full pl-4 py-2 bg-input-light border border-border-light rounded-md" value="0" inputmode="numeric">
              </div>
              <div>
                <label class="block text-sm font-medium mb-1">สูง (ซม.)</label>
                <input id="h" class="w-full pl-4 py-2 bg-input-light border border-border-light rounded-md" value="0" inputmode="numeric">
              </div>
              <div>
                <label class="block text-sm font-medium mb-1">น้ำหนัก (กก.)</label>
                <input id="weight" class="w-full pl-4 py-2 bg-input-light border border-border-light rounded-md" value="0.00" inputmode="decimal">
              </div>
            </div>

            <label class="block text-sm font-medium mt-3 mb-1">ประเภทพัสดุ</label>
            <select id="parcelType" class="w-full pl-4 py-2 bg-input-light border border-border-light rounded-md">
              <option>เอกสาร</option><option>อาหารแห้ง</option><option>ของใช้</option>
              <option>อุปกรณ์ไอที</option><option>เสื้อผ้า</option><option>สื่อบันเทิง</option>
              <option>อะไหล่รถยนต์</option><option>รองเท้า กระเป๋า</option><option>อุปกรณ์กีฬา</option>
              <option>เครื่องสำอางค์</option><option>เฟอร์นิเจอร์</option><option>อื่นๆ</option>
            </select>

            <button id="btnCalc" class="mt-4 bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-md">คำนวณราคา</button>
          </div>

          <div>
            <span class="inline-block bg-green-200 text-green-800 text-sm font-semibold px-3 py-1 rounded-md mb-4">Step 4 คำนวณค่าขนส่ง</span>
            <table class="w-full text-left text-sm">
              <thead class="text-slate-500">
                <tr>
                  <th class="py-2 font-semibold">บริษัท</th>
                  <th class="py-2 font-semibold">ค่าขนส่ง</th>
                  <th class="py-2 font-semibold">รายได้</th>
                </tr>
              </thead>
              <tbody id="quoteRows">
                <tr><td class="py-3" colspan="3" id="quoteEmpty">– กดคำนวณราคาเพื่อแสดงตัวเลือก –</td></tr>
              </tbody>
            </table>
            <div class="flex justify-end mt-6">
              <button id="nextToStep5" class="btn-gray font-semibold py-2 px-6 rounded-md" disabled>ถัดไป</button>
            </div>
          </div>
        </div>
      </section>

      <!-- STEP 5: Cost / Add-on -->
      <section id="step5" class="bg-white rounded-xl shadow p-6 muted">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
          <div>
            <span class="inline-block bg-blue-200 text-blue-800 text-sm font-semibold px-3 py-1 rounded-md mb-4">Step 5 รายละเอียดค่าใช้จ่าย</span>
            <div class="mb-2">บริษัทขนส่ง : <span id="chosenCompany" class="text-primary font-semibold">-</span></div>
            <div class="mb-4">
              <label class="block text-sm font-medium mb-1">ราคาสินค้าเสริม</label>
              <input id="addon" class="w-full pl-4 py-2 bg-input-light border border-border-light rounded-md" value="0.00" inputmode="decimal">
            </div>
            <div class="grid grid-cols-2 gap-4 mb-4">
              <div><div class="text-sm text-slate-600">ค่าขนส่ง</div><div id="feeShip" class="font-semibold">$0.00</div></div>
              <div><div class="text-sm text-slate-600">ตัดเงินในระบบ</div><div id="feeWallet" class="font-semibold">$0.00</div></div>
            </div>
            <div class="mb-2"><div class="text-sm text-slate-600">ยอดเรียกเก็บกับลูกค้า</div><div id="feeCharge" class="font-semibold">$0.00</div></div>
            <div class="flex justify-end mt-4"><button id="btnAddOrder" class="bg-primary text-white font-semibold py-2 px-6 rounded-md">เพิ่มออร์เดอร์</button></div>
          </div>
        </div>
      </section>

      <!-- CHECK OUT -->
      <section id="checkout" class="bg-white rounded-xl shadow p-6">
        <h3 class="text-lg font-semibold mb-3">CHECK OUT (รอการชำระเงิน)</h3>
        <table class="w-full text-left text-sm">
          <thead class="text-slate-500">
            <tr><th class="py-2"><input id="selectAll" type="checkbox"></th><th class="py-2">เลขออร์เดอร์</th><th class="py-2">ยอดชำระ</th><th class="py-2">ประเภท</th><th class="py-2">ดำเนินการ</th></tr>
          </thead>
          <tbody id="checkoutRows"></tbody>
        </table>
        <div class="flex items-center justify-between mt-4">
          <div>เลือกแล้ว: <b id="selectedCount">0</b> รายการ | รวม: <b id="selectedTotal">$0.00</b></div>
          <button id="btnPayAll" class="bg-primary text-white font-semibold py-2 px-6 rounded-md">รับเงินและพิมพ์ใบเสร็จ</button>
        </div>
      </section>

    </main>
  </div>
</div>

<script type="module" src="../js/create-order.js"></script>
</body>
</html>
